* Step 1

should be callable

#+BEGIN_SRC javascript
export function shorten() {}
#+END_SRC

* Step 2

should shorten an amazon link

test
#+BEGIN_SRC javascript
    it( 'should shorten a link', () => {
        const testLink = new URL( 'https://www.amazon.com/Chon/dp/B07QRLNW9B?pf_rd_p=5cc0ab18-ad5f-41cb-89ad-d43149f4e286&pd_rd_wg=0YiVS&pf_rd_r=BBQGR1ZWZBMTFG2TZG4D&ref_=pd_gw_wish&pd_rd_w=yEzK2&pd_rd_r=56e3b574-f148-4f3e-9ab8-555ecf3de5cf' );

        const expectedShortenedLink = new URL( 'https://amzn.com/B07QRLNW9B' );

        const actualShortenedLink = shorten( testLink );

        expect( actualShortenedLink.toString() )
            .toEqual( expectedShortenedLink.toString() );
    } );
#+END_SRC

implementation
#+BEGIN_SRC javascript
export function shorten( link ) {
    const productIdPart = link.pathname.match( /\/dp\/([\w\d]+)/ );
    if ( productIdPart ) {
        const shortenedLink = new URL( link.toString() );
        shortenedLink.pathname = productIdPart;
        shortenedLink.search = '';
        shortenedLink.hostname = 'amzn.com';
        return shortenedLink;
    }
    return null;
}
#+END_SRC

